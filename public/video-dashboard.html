<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <link rel="icon" type="image/png"
        href="https://static.ticimax.cloud/31817/uploads/editoruploads/bilgekarga-image/bilge-karga.png">
    <script src="dashboard-init.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Video — Bilge Karga Video</title>
    <link rel="stylesheet" href="css/dashboard.css">
</head>

<body>
    <!-- ─── SVG sprite ─────────────────────────────────────────────────────── -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
        <symbol id="i-film" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="2" width="20" height="20" rx="2" />
            <line x1="7" y1="2" x2="7" y2="22" />
            <line x1="17" y1="2" x2="17" y2="22" />
            <line x1="2" y1="12" x2="22" y2="12" />
            <line x1="2" y1="7" x2="7" y2="7" />
            <line x1="2" y1="17" x2="7" y2="17" />
            <line x1="17" y1="17" x2="22" y2="17" />
            <line x1="17" y1="7" x2="22" y2="7" />
        </symbol>
        <symbol id="i-check-circle" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <polyline points="9 12 11 14 15 10" />
        </symbol>
        <symbol id="i-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10" />
            <polyline points="12 6 12 12 16 14" />
        </symbol>
        <symbol id="i-database" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <ellipse cx="12" cy="5" rx="9" ry="3" />
            <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3" />
            <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5" />
        </symbol>
        <symbol id="i-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8" />
            <line x1="21" y1="21" x2="16.65" y2="16.65" />
        </symbol>
        <symbol id="i-download" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
            <polyline points="7 10 12 15 17 10" />
            <line x1="12" y1="15" x2="12" y2="3" />
        </symbol>
        <symbol id="i-trash" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="3 6 5 6 21 6" />
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2" />
            <line x1="10" y1="11" x2="10" y2="17" />
            <line x1="14" y1="11" x2="14" y2="17" />
        </symbol>
        <symbol id="i-eye" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
            <circle cx="12" cy="12" r="3" />
        </symbol>
        <symbol id="i-refresh" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="23 4 23 10 17 10" />
            <polyline points="1 20 1 14 7 14" />
            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15" />
        </symbol>
        <symbol id="i-upload" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
            <polyline points="17 8 12 3 7 8" />
            <line x1="12" y1="3" x2="12" y2="15" />
        </symbol>
        <symbol id="i-bar-chart" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="20" x2="18" y2="10" />
            <line x1="12" y1="20" x2="12" y2="4" />
            <line x1="6" y1="20" x2="6" y2="14" />
        </symbol>
        <symbol id="i-x" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
            stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18" />
            <line x1="6" y1="6" x2="18" y2="18" />
        </symbol>
        <symbol id="i-plus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="5" x2="12" y2="19" />
            <line x1="5" y1="12" x2="19" y2="12" />
        </symbol>
        <symbol id="i-retry" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="1 4 1 10 7 10" />
            <path d="M3.51 15a9 9 0 1 0 .49-4.53" />
        </symbol>
        <symbol id="i-folder" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />
        </symbol>
        <symbol id="i-alert" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" />
            <line x1="12" y1="9" x2="12" y2="13" />
            <line x1="12" y1="17" x2="12.01" y2="17" />
        </symbol>
        <symbol id="i-inbox" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="22 12 16 12 14 15 10 15 8 12 2 12" />
            <path
                d="M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z" />
        </symbol>
        <symbol id="i-chevron-left" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="15 18 9 12 15 6" />
        </symbol>
        <symbol id="i-chevron-right" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="9 18 15 12 9 6" />
        </symbol>
        <symbol id="i-trending-up" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
            <polyline points="17 6 23 6 23 12" />
        </symbol>
        <symbol id="i-trending-down" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <polyline points="23 18 13.5 8.5 8.5 13.5 1 6" />
            <polyline points="17 18 23 18 23 12" />
        </symbol>
        <symbol id="i-link" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71" />
            <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71" />
        </symbol>
        <symbol id="i-copy" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
        </symbol>
        <symbol id="i-image" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
            <circle cx="8.5" cy="8.5" r="1.5" />
            <polyline points="21 15 16 10 5 21" />
        </symbol>
        <symbol id="i-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="5" />
            <line x1="12" y1="1" x2="12" y2="3" />
            <line x1="12" y1="21" x2="12" y2="23" />
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
            <line x1="1" y1="12" x2="3" y2="12" />
            <line x1="21" y1="12" x2="23" y2="12" />
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </symbol>
        <symbol id="i-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"
            stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
        </symbol>
        <symbol id="i-more-vertical" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="6" r="1.5" />
            <circle cx="12" cy="12" r="1.5" />
            <circle cx="12" cy="18" r="1.5" />
        </symbol>
        <symbol id="i-menu" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="6" x2="21" y2="6" />
            <line x1="3" y1="12" x2="21" y2="12" />
            <line x1="3" y1="18" x2="21" y2="18" />
        </symbol>
    </svg>

    <!-- ─── Navigation ─────────────────────────────────────────────────────── -->
    <nav class="nav">
        <button class="nav-hamburger" id="navHamburger" aria-label="Menüyü aç" aria-expanded="false"
            style="display:none;">
            <svg width="20" height="20">
                <use href="#i-menu" />
            </svg>
        </button>
        <a href="#" class="nav-brand">
            <span class="nav-brand-dot"></span>
            Bilge Karga Video
        </a>
        <div class="nav-divider nav-divider-desktop"></div>
        <div class="nav-links">
            <a href="#" class="nav-link active" data-tab="videos" id="navVideos">Videolar</a>
            <a href="#" class="nav-link" data-tab="monitoring" id="navMonitoring">Sistem Kontrol Merkezi</a>
            <a href="#" class="nav-link" data-tab="deleted" id="navDeleted" style="display:none">Son Silinenler</a>
            <a href="#" class="nav-link" data-tab="users" id="navUsers" style="display:none">Kullanıcı Yönetimi</a>
        </div>

        <div class="nav-spacer"></div>

        <div class="nav-actions">
            <button class="btn btn-ghost" id="themeToggleBtn" onclick="toggleTheme()" aria-label="Tema değiştir"
                title="Açık/Koyu mod">
                <svg width="14" height="14">
                    <use id="themeIconUse" href="#i-sun" />
                </svg>
            </button>
            <button class="btn btn-ghost" onclick="refreshData()" aria-label="Yenile">
                <svg width="14" height="14">
                    <use href="#i-refresh" />
                </svg>
            </button>
            <div class="nav-overflow-wrapper">
                <button class="btn btn-ghost" id="navOverflowBtn" aria-label="İşlemler" aria-expanded="false"
                    aria-haspopup="true" title="İşlemler">
                    <svg width="16" height="16">
                        <use href="#i-more-vertical" />
                    </svg>
                </button>
                <div class="nav-overflow-dropdown" id="navOverflowDropdown" role="menu" hidden>
                    <button class="nav-overflow-item" role="menuitem" id="wakeServerBtn" aria-label="Sunucuyu uyandır">
                        <svg width="14" height="14">
                            <use href="#i-retry" />
                        </svg>
                        Sunucuyu uyandır
                    </button>
                    <button class="nav-overflow-item" role="menuitem" onclick="unstickJobs()">
                        <svg width="14" height="14">
                            <use href="#i-retry" />
                        </svg>
                        Askıda sıfırla
                    </button>
                    <button class="nav-overflow-item" role="menuitem" onclick="exportData()">
                        <svg width="14" height="14">
                            <use href="#i-download" />
                        </svg>
                        CSV
                    </button>
                    <button class="nav-overflow-item" role="menuitem" onclick="showStatsModal()">
                        <svg width="14" height="14">
                            <use href="#i-bar-chart" />
                        </svg>
                        İstatistikler
                    </button>
                    <button class="nav-overflow-item" role="menuitem" onclick="showUrlModal()">
                        <svg width="14" height="14">
                            <use href="#i-link" />
                        </svg>
                        URL Ekle
                    </button>
                </div>
            </div>
            <button class="btn btn-primary" onclick="window.location.href='video-upload.html'">
                <svg width="14" height="14">
                    <use href="#i-plus" />
                </svg>
                Yükle
            </button>
            <button id="btnNukeRaw" type="button" onclick="purgeRawBucket()"
                style="display:none; background-color: #ef4444; color: white; padding: 8px 16px; border-radius: 6px; font-weight: bold; border: none; cursor: pointer; margin-left: 10px;"
                title="R2 RAW deposunu boşalt (root only, raw varsa görünür)">
                ☢️ RAW Kutusunu Boşalt
            </button>
        </div>
    </nav>

    <!-- Mobile nav drawer -->
    <div class="nav-drawer-overlay" id="navDrawerOverlay" aria-hidden="true"></div>
    <div class="nav-drawer" id="navDrawer" aria-hidden="true">
        <div class="nav-links in-drawer" style="display:flex;">
            <a href="#" class="nav-link active" data-tab="videos" data-drawer-close>Videolar</a>
            <a href="#" class="nav-link" data-tab="monitoring" data-drawer-close>Sistem Kontrol Merkezi</a>
            <a href="#" class="nav-link" data-tab="deleted" id="navDeletedDrawer" style="display:none"
                data-drawer-close>Son Silinenler</a>
            <a href="#" class="nav-link" data-tab="users" id="navUsersDrawer" style="display:none"
                data-drawer-close>Kullanıcı Yönetimi</a>
        </div>
        <div class="nav-actions in-drawer" style="display:flex;flex-direction:column;gap:8px;">
            <button class="btn btn-ghost" onclick="toggleTheme();closeNavDrawer();"><svg width="14" height="14">
                    <use href="#i-sun" />
                </svg> Tema</button>
            <button class="btn btn-ghost" onclick="refreshData();closeNavDrawer();"><svg width="14" height="14">
                    <use href="#i-refresh" />
                </svg> Yenile</button>
            <button class="btn btn-ghost" id="wakeServerBtnDrawer" onclick="wakeServer();closeNavDrawer();"><svg
                    width="14" height="14">
                    <use href="#i-retry" />
                </svg> Sunucuyu uyandır</button>
            <button class="btn btn-ghost" onclick="unstickJobs();closeNavDrawer();"><svg width="14" height="14">
                    <use href="#i-retry" />
                </svg> Askıda sıfırla</button>
            <button class="btn btn-ghost" onclick="exportData();closeNavDrawer();"><svg width="14" height="14">
                    <use href="#i-download" />
                </svg> CSV</button>
            <button class="btn btn-ghost" onclick="showStatsModal();closeNavDrawer();"><svg width="14" height="14">
                    <use href="#i-bar-chart" />
                </svg> İstatistikler</button>
            <button class="btn btn-ghost" onclick="showUrlModal();closeNavDrawer();"><svg width="14" height="14">
                    <use href="#i-link" />
                </svg> URL Ekle</button>
            <button class="btn btn-primary" onclick="window.location.href='video-upload.html'"><svg width="14"
                    height="14">
                    <use href="#i-plus" />
                </svg> Yükle</button>
        </div>
    </div>

    <div class="bk-workspace">
        <aside class="bk-sidebar" id="bkSidebar" aria-label="Workspace menü">
            <nav class="bk-sidebar-nav">
                <a href="/" id="bkSidebarDashboard"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="7" height="7" />
                        <rect x="14" y="3" width="7" height="7" />
                        <rect x="14" y="14" width="7" height="7" />
                        <rect x="3" y="14" width="7" height="7" />
                    </svg><span class="bk-sidebar-label">Dashboard</span></a>
                <a href="/library" id="bkSidebarLibrary"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="2" width="20" height="20" rx="2" />
                        <line x1="7" y1="2" x2="7" y2="22" />
                        <line x1="17" y1="2" x2="17" y2="22" />
                        <line x1="2" y1="12" x2="22" y2="12" />
                    </svg><span class="bk-sidebar-label">Library</span></a>
                <div class="sidebar-search-wrapper" id="sidebarSearchWrapper">
                    <div class="search-wrapper">
                        <svg class="search-icon" width="14" height="14">
                            <use href="#i-search" />
                        </svg>
                        <input type="search" id="searchInputSidebar" class="search-input" placeholder="Video veya ürün ara…" aria-label="Video veya ürün ara">
                    </div>
                </div>
                <div id="sidebarFoldersContainer" class="sidebar-sub-list"></div>
                <a href="/folders" id="bkSidebarFolders"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z" />
                    </svg><span class="bk-sidebar-label">Folders</span></a>
                <a href="#" data-tab="monitoring" id="bkSidebarAnalytics"><svg width="18" height="18"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.25" stroke-linecap="round"
                        stroke-linejoin="round">
                        <line x1="18" y1="20" x2="18" y2="10" />
                        <line x1="12" y1="20" x2="12" y2="4" />
                        <line x1="6" y1="20" x2="6" y2="14" />
                    </svg><span class="bk-sidebar-label">Analytics</span></a>
                <a href="#" data-tab="deleted" id="bkSidebarTrash"><svg width="18" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="1.25" stroke-linecap="round"
                        stroke-linejoin="round">
                        <polyline points="3 6 5 6 21 6" />
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v2" />
                        <line x1="10" y1="11" x2="10" y2="17" />
                        <line x1="14" y1="11" x2="14" y2="17" />
                    </svg><span class="bk-sidebar-label">Trash</span></a>
            </nav>
            <div class="bk-sidebar-footer">
                <button type="button" class="bk-sidebar-logout" id="logoutBtn" aria-label="Çıkış yap"><svg width="18"
                        height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.25"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                        <polyline points="16 17 21 12 16 7" />
                        <line x1="21" y1="12" x2="9" y2="12" />
                    </svg><span class="bk-sidebar-label">Çıkış Yap</span></button>
                <button type="button" class="bk-sidebar-toggle" id="sidebarToggleBtn"
                    aria-label="Sidebar daralt/genişlet"><svg width="18" height="18" id="bkSidebarToggleIcon">
                        <use href="#i-chevron-left" />
                    </svg><span class="bk-sidebar-label">Daralt/Genişlet</span></button>
            </div>
        </aside>
        <div class="bk-main">
            <div class="bk-topbar">
                <h1 class="bk-topbar-title">Library</h1>
                <span class="bk-topbar-badge" id="libraryVideoCountBadge">— Video</span>
                <div class="bk-topbar-spacer"></div>
                <div class="search-wrapper bk-topbar-search"><svg class="search-icon" width="14" height="14">
                        <use href="#i-search" />
                    </svg><input type="search" id="searchInputTopBar" class="search-input" placeholder="Video veya ürün ara…"
                        aria-label="Video veya ürün ara"></div>
                <button class="btn btn-primary" onclick="window.location.href='video-upload.html'"><svg width="14"
                        height="14">
                        <use href="#i-upload" />
                    </svg> Upload</button>
            </div>
            <!-- ─── Main ───────────────────────────────────────────────────────────── -->
            <main>
                <!-- İki kademeli canlı UI alarm banner (V17) -->
                <div id="system-alert-banner" role="alert">
                    <button type="button" class="alert-dismiss" id="alert-dismiss-btn" onclick="dismissAlertBanner()"
                        aria-label="Uyarıyı kapat">
                        <svg width="18" height="18">
                            <use href="#i-x" />
                        </svg>
                    </button>
                    <div class="alert-title" id="alert-main-title">Önemli uyarı</div>
                    <div id="dynamic-alert-content">
                        <div id="api-injection-slot" class="alert-line" style="color: #fbbf24; margin-bottom: 8px;">
                        </div>
                        <div id="alert-text-critical">
                            <div class="alert-line">PYTHON AGENT BELLEK SINIRINI AŞTI</div>
                            <div class="alert-line">SELF-RECOVERY PROSEDÜRÜ BAŞLATILDI</div>
                            <div class="alert-line">SİSTEM STABİLİTESİ İZLENİYOR</div>
                            <div class="alert-line">YÖNETİCİ İLETİŞİMİ BAŞLATILDI</div>
                        </div>
                        <div id="alert-text-warning" style="display: none;">
                            <div class="alert-line">PYTHON AGENT BELLEK KULLANIMI YÜKSELDİ</div>
                            <div class="alert-line">MEVCUT KULLANIM: 28 GB+</div>
                            <div class="alert-line">RİSK EŞİĞİNE YAKLAŞILIYOR</div>
                            <div class="alert-line">SİSTEM STABİLİTESİ İZLENİYOR</div>
                        </div>
                    </div>
                </div>
                <div class="container">
                    <div class="page-body">

                        <!-- ─── Dashboard (/) ───────────────────────────────────────────────── -->
                        <div id="panelDashboard" class="tab-panel" role="tabpanel" aria-labelledby="bkSidebarDashboard"
                            hidden>
                            <div class="page-header">
                                <div>
                                    <div class="page-title">Dashboard</div>
                                    <div class="page-subtitle">Video işlemlerinizin özeti</div>
                                </div>
                                <button class="btn btn-primary" onclick="window.location.href='/library'">
                                    <svg width="14" height="14">
                                        <use href="#i-film" />
                                    </svg>
                                    Tüm Videoları Yönet
                                </button>
                            </div>
                            <div class="stats-grid stats-grid-videos" id="dashboardStatsGrid">
                                <div class="stat-card">
                                    <div class="stat-card-header"><span class="stat-label">Toplam Video</span><svg
                                            class="stat-icon" width="16" height="16">
                                            <use href="#i-film" />
                                        </svg></div>
                                    <div class="stat-value" id="totalVideosDash">—</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card-header"><span class="stat-label">İşlenmiş</span><svg
                                            class="stat-icon" width="16" height="16">
                                            <use href="#i-check-circle" />
                                        </svg></div>
                                    <div class="stat-value" id="completedVideosDash">—</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card-header"><span class="stat-label">İşleniyor</span><svg
                                            class="stat-icon" width="16" height="16">
                                            <use href="#i-clock" />
                                        </svg></div>
                                    <div class="stat-value" id="processingVideosDash">—</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card-header"><span class="stat-label">Depo</span><svg
                                            class="stat-icon" width="16" height="16">
                                            <use href="#i-database" />
                                        </svg></div>
                                    <div class="stat-value" id="storageGbDash">—</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card-header"><span class="stat-label">Sunucu</span><span
                                            class="stat-icon" id="agentStatusDotDash"
                                            style="width:8px;height:8px;border-radius:50%;background:var(--text-subtle)"></span>
                                    </div>
                                    <div class="stat-value" id="agentLastSeenDash" style="font-size:14px">—</div>
                                </div>
                            </div>
                            <div id="topViewedWidgetDashboard" class="top-viewed-widget" style="margin-bottom:24px">
                                <div class="top-viewed-header"><span class="top-viewed-title">En Çok İzlenenler (Top
                                        5)</span></div>
                                <div id="topViewedListDashboard" class="top-viewed-list"></div>
                            </div>
                        </div>

                        <!-- ─── Library (/library) ─────────────────────────────────────────── -->
                        <div id="panelVideos" class="tab-panel" role="tabpanel" aria-labelledby="navVideos">
                            <!-- Page header -->
                            <div class="page-header">
                                <div>
                                    <div class="page-title">Video Yönetimi</div>
                                    <div class="page-subtitle">Tüm videolarınızı yönetin, filtreleyin ve raporlayın
                                    </div>
                                </div>
                            </div>

                            <!-- Stats -->
                            <div class="stats-grid stats-grid-videos">
                                <div class="stat-card">
                                    <div class="stat-card-header">
                                        <span class="stat-label">Toplam Video</span>
                                        <svg class="stat-icon" width="16" height="16">
                                            <use href="#i-film" />
                                        </svg>
                                    </div>
                                    <div class="stat-value" id="totalVideos">—</div>
                                    <div class="stat-trend trend-neutral" id="videoTrend">—</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card-header">
                                        <span class="stat-label">İşlenmiş</span>
                                        <svg class="stat-icon" width="16" height="16">
                                            <use href="#i-check-circle" />
                                        </svg>
                                    </div>
                                    <div class="stat-value" id="completedVideos">—</div>
                                    <div class="stat-trend trend-neutral" id="completedTrend">—</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card-header">
                                        <span class="stat-label">İşleniyor</span>
                                        <svg class="stat-icon" width="16" height="16">
                                            <use href="#i-clock" />
                                        </svg>
                                    </div>
                                    <div class="stat-value" id="processingVideos">—</div>
                                    <div class="stat-trend trend-neutral" id="processingTrend">—</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card-header">
                                        <span class="stat-label">Depo</span>
                                        <svg class="stat-icon" width="16" height="16">
                                            <use href="#i-database" />
                                        </svg>
                                    </div>
                                    <div class="stat-value" id="storageGb">—</div>
                                    <div class="stat-trend trend-neutral" id="storageTrend">Public depo</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card-header">
                                        <span class="stat-label">Toplam Tasarruf</span>
                                        <svg class="stat-icon" width="16" height="16">
                                            <use href="#i-trending-down" />
                                        </svg>
                                    </div>
                                    <div class="stat-value" id="totalSavingsGb">—</div>
                                    <div class="stat-trend trend-neutral">∑(input − output)</div>
                                </div>
                                <div class="stat-card" id="agentStatusCard">
                                    <div class="stat-card-header">
                                        <span class="stat-label">Sunucu Son Görülme</span>
                                        <span class="stat-icon" id="agentStatusDot"
                                            style="width:8px;height:8px;border-radius:50%;background:var(--text-subtle)"
                                            title="heartbeat"></span>
                                    </div>
                                    <div class="stat-value" id="agentLastSeen" style="font-size:14px">—</div>
                                    <div class="stat-trend trend-neutral" id="agentModeLabel">Sunucu Durumu: —</div>
                                </div>
                            </div>

                            <!-- En Çok İzlenenler (Top 5) -->
                            <div id="topViewedWidget" class="top-viewed-widget" style="margin-bottom:24px">
                                <div class="top-viewed-header">
                                    <span class="top-viewed-title">En Çok İzlenenler (Top 5)</span>
                                </div>
                                <div id="topViewedList" class="top-viewed-list"></div>
                            </div>

                            <!-- R2 Storage (root only): RAW + PUBLIC canlı veri -->
                            <div id="r2Widget" class="r2-storage-widget" style="display:none;margin-bottom:24px">
                                <div class="r2-storage-cards">
                                    <div class="stat-card r2-storage-card">
                                        <div class="stat-card-header">
                                            <span class="stat-label">RAW (Geçici Depo)</span>
                                            <svg class="stat-icon" width="16" height="16">
                                                <use href="#i-database" />
                                            </svg>
                                        </div>
                                        <div class="stat-value" id="r2RawUsageMb">—</div>
                                        <button type="button" class="btn btn-danger-ghost btn-nuke-widget" id="btnNukeRawWidget" onclick="purgeRawBucket()" style="display:none;margin-top:8px;">
                                            ☢️ Nuke Uygula
                                        </button>
                                    </div>
                                    <div class="stat-card r2-storage-card">
                                        <div class="stat-card-header">
                                            <span class="stat-label">PUBLIC (Dağıtım)</span>
                                            <svg class="stat-icon" width="16" height="16">
                                                <use href="#i-database" />
                                            </svg>
                                        </div>
                                        <div class="stat-value" id="r2PublicUsageMb">—</div>
                                    </div>
                                </div>
                                <div class="r2-storage-note">⚠️ Canlı R2 Verisi (D1'den bağımsız)</div>
                                <div class="r2-storage-actions">
                                    <button class="btn btn-ghost" id="r2PurgeBtn" onclick="r2Purge()"
                                        title="3+ günden eski FAILED/PENDING işleri temizle">
                                        <svg width="14" height="14">
                                            <use href="#i-trash" />
                                        </svg>
                                        Purge (eski işleri temizle)
                                    </button>
                                </div>
                            </div>

                            <!-- Çoklu video yükle (FormData → /api/upload) -->
                            <div class="multi-upload-section" style="margin-bottom:20px;padding:16px;background:var(--surface);border:1px solid var(--border);border-radius:10px;">
                                <div style="display:flex;flex-wrap:wrap;align-items:center;gap:12px;">
                                    <label class="btn btn-ghost" style="margin:0;cursor:pointer;">
                                        <svg width="14" height="14" style="vertical-align:middle;margin-right:6px"><use href="#i-upload"/></svg>
                                        Dosya seç
                                        <input type="file" id="multiUploadFileInput" accept="video/mp4,video/quicktime,video/x-msvideo,video/x-matroska,video/webm" multiple style="display:none">
                                    </label>
                                    <select id="multiUploadFolderId" class="filter-select" style="min-width:180px" aria-label="Yükleme klasörü">
                                        <option value="">Klasör seçin (opsiyonel)</option>
                                    </select>
                                    <button type="button" class="btn btn-primary" id="multiUploadBtn" onclick="submitMultiUpload()" disabled>
                                        Yükle
                                    </button>
                                    <span id="multiUploadStatus" style="font-size:13px;color:var(--text-muted)"></span>
                                </div>
                            </div>

                            <!-- Toolbar / filters -->
                            <div class="toolbar">
                                <div class="search-wrapper">
                                    <svg class="search-icon" width="14" height="14">
                                        <use href="#i-search" />
                                    </svg>
                                    <input type="search" id="searchInput" class="search-input" placeholder="Video veya ürün ara…" aria-label="Video veya ürün ara">
                                </div>
                                <select id="statusFilter" class="filter-select">
                                    <option value="">Tüm durumlar</option>
                                    <option value="uploaded">Yüklendi</option>
                                    <option value="processing">İşleniyor</option>
                                    <option value="completed">Tamamlandı</option>
                                    <option value="failed">Başarısız</option>
                                </select>
                                <select id="presetFilter" class="filter-select">
                                    <option value="">Tüm presetler</option>
                                    <option value="720p_web">720p Web</option>
                                    <option value="1080p_web">1080p Web</option>
                                </select>
                                <input type="date" id="dateFrom" class="filter-date">
                                <input type="date" id="dateTo" class="filter-date">
                                <div class="toolbar-spacer"></div>
                                <button class="btn btn-ghost" onclick="exportData()" title="CSV dışa aktar">
                                    <svg width="14" height="14">
                                        <use href="#i-download" />
                                    </svg>
                                    CSV Dışa Aktar
                                </button>
                            </div>

                            <!-- Bulk action bar (Videos) -->
                            <div id="bulkActionBarVideos" class="bulk-action-bar" hidden>
                                <span class="bulk-action-count"><span id="bulkSelectedCountVideos">0</span>
                                    seçili</span>
                                <button class="btn btn-ghost" id="bulkDeleteBtn" onclick="bulkDeleteSelected()">
                                    <svg width="14" height="14">
                                        <use href="#i-trash" />
                                    </svg>
                                    Seçilenleri sil
                                </button>
                                <button class="btn btn-ghost" id="bulkRetryBtn" onclick="bulkRetrySelected()">
                                    <svg width="14" height="14">
                                        <use href="#i-retry" />
                                    </svg>
                                    Seçilenleri yeniden işle
                                </button>
                                <button class="btn btn-ghost" id="bulkMoveBtn" onclick="openBulkMoveModal()">
                                    <svg width="14" height="14">
                                        <use href="#i-folder" />
                                    </svg>
                                    Toplu Taşı
                                </button>
                            </div>
                            <!-- Sayfa başı (above table) -->
                            <div class="toolbar" style="margin-bottom:8px;align-items:center;gap:8px">
                                <label for="pageSize" style="font-size:13px;color:var(--text-muted)">Sayfa başı</label>
                                <select id="pageSize" class="filter-select" aria-label="Sayfa başına kayıt">
                                    <option value="25" selected>25</option>
                                    <option value="50">50</option>
                                    <option value="100">100</option>
                                </select>
                            </div>
                            <!-- Table: 11 sütun (Checkbox, Thumbnail, Video, İzlenme, Preset, Çözünürlük, Boyut, Kazanç, Süre, Tarih, İşlem) -->
                            <table class="videos-table">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="headerCheckbox" aria-label="Tümünü seç"
                                                title="Tümünü seç"></th>
                                        <th>Thumbnail</th>
                                        <th>Video</th>
                                        <th class="sort-header" data-sort="view_count">İzlenme</th>
                                        <th class="sort-header" data-sort="quality">Preset</th>
                                        <th class="sort-header" data-sort="quality">Çözünürlük</th>
                                        <th class="sort-header" data-sort="file_size_input">Boyut</th>
                                        <th>Kazanç (%)</th>
                                        <th class="sort-header" data-sort="duration">Süre</th>
                                        <th class="sort-header" data-sort="created_at">Tarih</th>
                                        <th>İşlem</th>
                                    </tr>
                                </thead>
                                <tbody id="videosTableBody"></tbody>
                            </table>

                            <!-- Main view toggle: right-aligned below table -->
                            <div id="mainViewToggle" class="main-view-toggle"
                                style="display:flex;justify-content:flex-end;margin-bottom:12px"></div>

                            <!-- Pagination -->
                            <div class="pagination" id="pagination"></div>

                            <!-- Charts -->
                            <div class="charts-grid" style="grid-template-columns: repeat(4, 1fr);">
                                <div class="chart-card">
                                    <div class="chart-card-title">Durum Dağılımı</div>
                                    <div class="chart-placeholder" id="statusChart">
                                        <svg width="20" height="20">
                                            <use href="#i-bar-chart" />
                                        </svg>
                                        <span>Yükleniyor…</span>
                                    </div>
                                </div>
                                <div class="chart-card">
                                    <div class="chart-card-title">Günlük Yükleme</div>
                                    <div class="chart-placeholder" id="dailyChart">
                                        <svg width="20" height="20">
                                            <use href="#i-trending-up" />
                                        </svg>
                                        <span>Yükleniyor…</span>
                                    </div>
                                </div>
                                <div class="chart-card">
                                    <div class="chart-card-title">Raw Storage</div>
                                    <div class="chart-placeholder" id="rawStorageChart">
                                        <svg width="20" height="20">
                                            <use href="#i-database" />
                                        </svg>
                                        <span>Yükleniyor…</span>
                                    </div>
                                </div>
                                <div class="chart-card">
                                    <div class="chart-card-title">Public Storage</div>
                                    <div class="chart-placeholder" id="publicStorageChart">
                                        <svg width="20" height="20">
                                            <use href="#i-database" />
                                        </svg>
                                        <span>Yükleniyor…</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ─── Folders (/folders) ─────────────────────────────────────────────────── -->
                        <div id="panelFolders" class="tab-panel" role="tabpanel" aria-labelledby="bkSidebarFolders"
                            hidden>
                            <div class="page-header">
                                <div>
                                    <div class="page-title">Klasörler</div>
                                    <div class="page-subtitle">Videolarınızı klasörler halinde yönetin</div>
                                </div>
                                <button class="btn btn-primary" id="btnNewFolder" onclick="showNewFolderModal()">
                                    <svg width="14" height="14">
                                        <use href="#i-plus" />
                                    </svg>
                                    Yeni Klasör
                                </button>
                            </div>
                            <div id="foldersGrid" class="folders-grid"></div>
                        </div>

                        <!-- ─── Tab: Sistem Kontrol Merkezi ─────────────────────────────────────────── -->
                        <div id="panelMonitoring" class="tab-panel" role="tabpanel" aria-labelledby="navMonitoring"
                            hidden>
                            <div class="page-header">
                                <div>
                                    <div class="page-title">Sistem Kontrol Merkezi</div>
                                    <div class="page-subtitle">Giriş istatistikleri, ban listesi ve güvenlik olayları
                                    </div>
                                </div>
                                <div class="page-actions">
                                    <button class="btn btn-ghost" onclick="loadMonitoringData()"
                                        id="monitoringRefreshBtn">
                                        <svg width="14" height="14">
                                            <use href="#i-refresh" />
                                        </svg>
                                        Yenile
                                    </button>
                                    <button class="btn btn-ghost" onclick="exportMonitoringLogsCsv()"
                                        id="monitoringExportCsvBtn">
                                        <svg width="14" height="14">
                                            <use href="#i-download" />
                                        </svg>
                                        CSV İndir
                                    </button>
                                </div>
                            </div>
                            <div class="toolbar" style="margin-bottom:16px">
                                <div class="search-wrapper" style="flex:1;max-width:320px">
                                    <svg class="search-icon" width="14" height="14">
                                        <use href="#i-search" />
                                    </svg>
                                    <input type="text" id="monitoringSearchInput" class="search-input"
                                        placeholder="Loglarda ara (IP, olay, detay…)">
                                </div>
                            </div>
                            <div class="stats-grid" style="grid-template-columns:repeat(4,1fr)">
                                <div class="stat-card">
                                    <div class="stat-card-header">
                                        <span class="stat-label">Başarılı Giriş</span>
                                        <svg class="stat-icon" width="16" height="16">
                                            <use href="#i-check-circle" />
                                        </svg>
                                    </div>
                                    <div class="stat-value" id="monStatsSuccess">—</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card-header">
                                        <span class="stat-label">Başarısız Giriş</span>
                                        <svg class="stat-icon" width="16" height="16">
                                            <use href="#i-alert" />
                                        </svg>
                                    </div>
                                    <div class="stat-value" id="monStatsFailed">—</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card-header">
                                        <span class="stat-label">Honeypot</span>
                                        <svg class="stat-icon" width="16" height="16">
                                            <use href="#i-alert" />
                                        </svg>
                                    </div>
                                    <div class="stat-value" id="monStatsHoneypot">—</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-card-header">
                                        <span class="stat-label">Banlanan IP</span>
                                        <svg class="stat-icon" width="16" height="16">
                                            <use href="#i-database" />
                                        </svg>
                                    </div>
                                    <div class="stat-value" id="monStatsBanned">—</div>
                                </div>
                            </div>
                            <div class="videos-table" style="margin-bottom:16px">
                                <div class="table-header" style="grid-template-columns: 1fr 1.2fr 1fr 1fr 2fr 1.2fr">
                                    <div>Tarih</div>
                                    <div>IP</div>
                                    <div>Olay</div>
                                    <div>Durum</div>
                                    <div>Detay</div>
                                    <div>Konum</div>
                                </div>
                                <div class="table-body" id="monitoringLogsBody"></div>
                            </div>
                            <div class="videos-table" style="margin-bottom:16px">
                                <div
                                    style="padding:12px 16px;font-size:11.5px;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:var(--text-muted);border-bottom:1px solid var(--border)">
                                    Uygulama Logları (Video, R2)</div>
                                <div class="table-header" style="grid-template-columns: 1fr 0.8fr 1fr 1.5fr 2fr">
                                    <div>Tarih</div>
                                    <div>Seviye</div>
                                    <div>Olay</div>
                                    <div>Job ID</div>
                                    <div>Detay</div>
                                </div>
                                <div class="table-body" id="monitoringAppLogsBody"></div>
                            </div>
                            <div class="videos-table" style="margin-bottom:16px">
                                <div
                                    style="padding:12px 16px;font-size:11.5px;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:var(--text-muted);border-bottom:1px solid var(--border)">
                                    İşlem (Processing) Detay Logları</div>
                                <div class="table-header" style="grid-template-columns: 1fr 0.8fr 1fr 0.8fr 0.8fr 1fr 2fr">
                                    <div>Tarih</div>
                                    <div>Job ID</div>
                                    <div>Worker</div>
                                    <div>Olay</div>
                                    <div>Sn</div>
                                    <div>Hata Kodu</div>
                                    <div>Hata Mesajı</div>
                                </div>
                                <div class="table-body" id="monitoringProcessingLogsBody"></div>
                            </div>
                            <div class="videos-table" style="margin-bottom:16px">
                                <div
                                    style="padding:12px 16px;font-size:11.5px;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:var(--text-muted);border-bottom:1px solid var(--border)">
                                    Depolama ve İmha (Storage Lifecycle) Logları</div>
                                <div class="table-header" style="grid-template-columns: 1fr 0.7fr 1fr 1fr 1.5fr 2fr">
                                    <div>Tarih</div>
                                    <div>Job ID</div>
                                    <div>Olay</div>
                                    <div>Bucket</div>
                                    <div>Boyut</div>
                                    <div>Açıklama</div>
                                </div>
                                <div class="table-body" id="monitoringStorageLogsBody"></div>
                            </div>
                            <div class="videos-table" style="margin-bottom:16px">
                                <div
                                    style="padding:12px 16px;font-size:11.5px;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:var(--text-muted);border-bottom:1px solid var(--border)">
                                    Ajan ve Sistem Sağlığı (Heartbeat/Health)</div>
                                <div class="table-header" style="grid-template-columns: 1fr 1.2fr 0.8fr 0.8fr 0.8fr 1fr 2fr">
                                    <div>Tarih</div>
                                    <div>Worker ID</div>
                                    <div>Versiyon</div>
                                    <div>Durum</div>
                                    <div>Disk (MB)</div>
                                    <div>RAM (%)</div>
                                    <div>Detay</div>
                                </div>
                                <div class="table-body" id="monitoringAgentHealthLogsBody"></div>
                            </div>
                            <div class="videos-table" style="margin-bottom:16px">
                                <div
                                    style="padding:12px 16px;font-size:11.5px;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:var(--text-muted);border-bottom:1px solid var(--border)">
                                    Banlanan IP'ler</div>
                                <div class="table-body" id="monitoringBannedBody"></div>
                            </div>
                            <div class="videos-table" id="monitoringFailedSection" style="margin-bottom:16px">
                                <div
                                    style="padding:12px 16px;font-size:11.5px;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:var(--text-muted);border-bottom:1px solid var(--border)">
                                    Başarısız İşler (FFmpeg çıktısı)</div>
                                <div class="table-body" id="monitoringFailedBody"></div>
                            </div>
                            <div id="r2BucketExplorerSection" style="display:none;margin-bottom:24px">
                                <div
                                    style="padding:12px 16px;font-size:11.5px;font-weight:600;text-transform:uppercase;letter-spacing:.06em;color:var(--text-muted);border-bottom:1px solid var(--border);margin-bottom:12px">
                                    Kova Gezgini (root)</div>
                                <div style="display:flex;gap:8px;margin-bottom:12px">
                                    <select id="r2BucketSelect"
                                        style="height:32px;padding:0 8px;border:1px solid var(--border);border-radius:var(--radius);background:var(--surface);color:var(--text);font-size:13px">
                                        <option value="bk-video-raw">bk-video-raw</option>
                                        <option value="bk-video-public">bk-video-public</option>
                                    </select>
                                    <button class="btn btn-ghost" onclick="loadR2BucketList()">
                                        <svg width="14" height="14">
                                            <use href="#i-refresh" />
                                        </svg>
                                        Listele
                                    </button>
                                    <button class="btn btn-ghost" onclick="cleanupR2Orphans()" id="r2CleanupBtn"
                                        title="D1 ile eşleşmeyen hayalet dosyaları sil">
                                        <svg width="14" height="14">
                                            <use href="#i-trash"></use>
                                        </svg> Hayaletleri Temizle
                                    </button>
                                    <input type="text" id="r2PrefixInput" placeholder="Önek (opsiyonel)"
                                        style="flex:1;max-width:240px;height:32px;padding:0 10px;border:1px solid var(--border);border-radius:var(--radius);background:var(--surface);color:var(--text);font-size:13px">
                                </div>
                                <div class="videos-table">
                                    <div class="table-header" style="grid-template-columns: 2fr 1fr 1.2fr">
                                        <div>Key</div>
                                        <div>Boyut</div>
                                        <div>Yükleme</div>
                                    </div>
                                    <div class="table-body" id="r2BucketListBody"></div>
                                </div>
                                <div id="r2ListPagination"
                                    style="margin-top:12px;font-size:12px;color:var(--text-muted)"></div>
                            </div>
                        </div>

                        <!-- ─── Tab: Son Silinenler (Root Only) ───────────────────────────────── -->
                        <div id="panelDeleted" class="tab-panel" role="tabpanel" aria-labelledby="navDeleted" hidden>
                            <div class="page-header">
                                <div>
                                    <div class="page-title">Son Silinenler</div>
                                    <div class="page-subtitle">Soft silinen videolar — geri yükle veya kalıcı sil</div>
                                </div>
                                <div class="page-actions">
                                    <button class="btn btn-ghost" onclick="loadDeletedVideos()">
                                        <svg width="14" height="14">
                                            <use href="#i-refresh" />
                                        </svg>
                                        Yenile
                                    </button>
                                </div>
                            </div>
                            <div class="toolbar" style="margin-bottom:16px">
                                <div class="search-wrapper" style="flex:1;max-width:320px">
                                    <svg class="search-icon" width="14" height="14">
                                        <use href="#i-search" />
                                    </svg>
                                    <input type="text" id="deletedSearchInput" class="search-input" placeholder="Ara…">
                                </div>
                                <button class="btn btn-ghost" onclick="exportDeletedCsv()">
                                    <svg width="14" height="14">
                                        <use href="#i-download" />
                                    </svg>
                                    CSV Dışa Aktar
                                </button>
                            </div>
                            <div id="bulkActionBarDeleted" class="bulk-action-bar" hidden>
                                <span class="bulk-action-count"><span id="bulkSelectedCountDeleted">0</span>
                                    seçili</span>
                                <button class="btn btn-ghost" onclick="bulkRestoreSelected()">
                                    <svg width="14" height="14">
                                        <use href="#i-retry" />
                                    </svg>
                                    Seçilenleri geri yükle
                                </button>
                                <button class="btn btn-danger-ghost" id="bulkPurgeBtn" onclick="bulkPurgeSelected()">
                                    <svg width="14" height="14">
                                        <use href="#i-trash" />
                                    </svg>
                                    Seçilenleri kalıcı sil
                                </button>
                            </div>
                            <table class="videos-table deleted-table">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="headerCheckboxDeleted" aria-label="Tümünü seç"
                                                title="Tümünü seç"></th>
                                        <th>Thumbnail</th>
                                        <th>Video</th>
                                        <th>İzlenme</th>
                                        <th>Preset</th>
                                        <th>Boyut</th>
                                        <th>Kazanç (%)</th>
                                        <th>Süre</th>
                                        <th>Silinme Tarihi</th>
                                        <th>İşlem</th>
                                    </tr>
                                </thead>
                                <tbody id="deletedTableBody"></tbody>
                            </table>
                            <div class="pagination" id="deletedPagination"></div>
                        </div>

                        <!-- ─── Tab: Kullanıcı Yönetimi (Root Only) ──────────────────────────── -->
                        <div id="panelUsers" class="tab-panel" role="tabpanel" aria-labelledby="navUsers" hidden>
                            <div class="page-header">
                                <div>
                                    <div class="page-title">Kullanıcı Yönetimi</div>
                                    <div class="page-subtitle">Admin kullanıcıları yönetin</div>
                                </div>
                                <div class="page-actions">
                                    <button class="btn btn-primary" id="btnNewUser" onclick="showNewUserModal()">
                                        <svg width="14" height="14">
                                            <use href="#i-plus" />
                                        </svg>
                                        Yeni Admin
                                    </button>
                                    <button class="btn btn-ghost" onclick="loadUsers()">
                                        <svg width="14" height="14">
                                            <use href="#i-refresh" />
                                        </svg>
                                        Yenile
                                    </button>
                                </div>
                            </div>
                            <div class="saas-table-full saas-table-users" style="margin-bottom:24px">
                                <div class="saas-table-header saas-table-header-users">
                                    <div class="saas-col saas-col-user">Kullanıcı adı</div>
                                    <div class="saas-col saas-col-role">Rol (Hiyerarşi)</div>
                                    <div class="saas-col saas-col-status">Durum</div>
                                    <div class="saas-col saas-col-date">Oluşturulma</div>
                                    <div class="saas-col saas-col-lastlogin">Son Giriş</div>
                                    <div class="saas-col saas-col-actions">İşlem</div>
                                </div>
                                <div class="saas-table-body" id="usersTableBody"></div>
                            </div>
                        </div>

                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- ─── Modal: Video detail ────────────────────────────────────────────── -->
    <div class="modal" id="videoModal" role="dialog" aria-modal="true" aria-labelledby="videoModalTitle"
        aria-hidden="true">
        <div class="modal-content" style="max-width:680px">
            <div class="modal-header">
                <span class="modal-title" id="videoModalTitle">Video Detayları</span>
                <button class="modal-close" onclick="closeModal()" aria-label="Kapat">
                    <svg width="16" height="16">
                        <use href="#i-x" />
                    </svg>
                </button>
            </div>
            <div id="bkPlayerContainer" style="display:none;margin-bottom:20px;border-radius:6px;overflow:hidden;">
            </div>
            <div class="modal-details" id="modalDetails"></div>
            <div class="logs-container" id="modalLogs"></div>
            <div class="modal-actions" id="modalActions"></div>
        </div>
    </div>

    <!-- ─── Modal: Statistics ──────────────────────────────────────────────── -->
    <div class="modal" id="statsModal" role="dialog" aria-modal="true" aria-labelledby="statsModalTitle"
        aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title" id="statsModalTitle">İstatistikler</span>
                <button class="modal-close" onclick="closeStatsModal()" aria-label="Kapat">
                    <svg width="16" height="16">
                        <use href="#i-x" />
                    </svg>
                </button>
            </div>
            <div class="modal-details" id="statsDetails"></div>
        </div>
    </div>

    <!-- ─── Modal: Error detail ─────────────────────────────────────────────── -->
    <div class="modal" id="errorDetailModal" role="dialog" aria-modal="true" aria-labelledby="errorDetailModalTitle"
        aria-hidden="true">
        <div class="modal-content" style="max-width:640px">
            <div class="modal-header">
                <span class="modal-title" id="errorDetailModalTitle">Hata Detayı</span>
                <button class="modal-close" onclick="closeModal()" aria-label="Kapat">
                    <svg width="16" height="16">
                        <use href="#i-x" />
                    </svg>
                </button>
            </div>
            <div id="errorDetailContent" class="error-detail-body"></div>
        </div>
    </div>

    <!-- ─── Modal: URL import ───────────────────────────────────────────────── -->
    <div class="modal" id="urlModal" role="dialog" aria-modal="true" aria-labelledby="urlModalTitle" aria-hidden="true">
        <div class="modal-content" style="max-width:480px">
            <div class="modal-header">
                <span class="modal-title" id="urlModalTitle">URL ile Video Ekle</span>
                <button class="modal-close" onclick="closeUrlModal()" aria-label="Kapat">
                    <svg width="16" height="16">
                        <use href="#i-x" />
                    </svg>
                </button>
            </div>

            <div style="display:flex;flex-direction:column;gap:16px">

                <!-- URL input -->
                <div style="display:flex;flex-direction:column;gap:5px">
                    <label class="detail-label" for="urlInput">Video URL</label>
                    <input type="url" id="urlInput" autocomplete="off" spellcheck="false"
                        style="width:100%;height:34px;padding:0 10px;border:1px solid var(--border);border-radius:var(--radius);font-size:13px;font-family:inherit;color:var(--text);background:var(--surface);outline:none;transition:border-color .15s;"
                        placeholder="https://drive.google.com/… veya doğrudan .mp4 URL">
                    <div id="urlHint" style="font-size:11.5px;color:var(--text-subtle);min-height:16px"></div>
                    <!-- Folder selection -->
                    <div style="display:flex;flex-direction:column;gap:5px">
                        <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
                            <label class="detail-label" for="urlFolder">Klasör <span
                                    style="font-weight:400;color:var(--text-subtle)">(opsiyonel)</span></label>
                            <a href="#" id="urlNewFolderLink" style="font-size:12px;text-decoration:underline;cursor:pointer;color:var(--primary);">Yeni klasör</a>
                        </div>
                        <select id="urlFolder" class="filter-select" style="height:34px;width:100%">
                            <option value="">Klasör Seçin...</option>
                        </select>
                    </div>

                    <!-- Preset + project row -->
                    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
                        <div style="display:flex;flex-direction:column;gap:5px">
                            <label class="detail-label" for="urlPreset">Preset</label>
                            <select id="urlPreset" class="filter-select" style="height:34px;width:100%">
                                <option value="720p">720p Web</option>
                                <option value="1080p">1080p Web</option>
                            </select>
                        </div>
                        <div style="display:flex;flex-direction:column;gap:5px">
                            <label class="detail-label" for="urlProject">Proje <span
                                    style="font-weight:400;color:var(--text-subtle)">(opsiyonel)</span></label>
                            <input type="text" id="urlProject"
                                style="height:34px;padding:0 10px;border:1px solid var(--border);border-radius:var(--radius);font-size:13px;font-family:inherit;color:var(--text);background:var(--surface);outline:none;"
                                placeholder="2026 Kampanyası">
                        </div>
                    </div>

                    <!-- Error banner (hidden by default) -->
                    <div id="urlError"
                        style="display:none;background:#fef2f2;border:1px solid #fca5a5;border-radius:var(--radius-sm);padding:10px 12px;font-size:12.5px;color:#991b1b">
                    </div>

                </div>

                <div class="modal-actions">
                    <button class="btn btn-ghost" onclick="closeUrlModal()">İptal</button>
                    <button class="btn btn-primary" id="urlSubmitBtn" onclick="submitUrlImport()">
                        <svg width="13" height="13">
                            <use href="#i-link" />
                        </svg>
                        Kuyruğa Ekle
                    </button>
                </div>
            </div>
        </div>

        <!-- ─── Modal: Yeni Admin ───────────────────────────────────────────────────── -->
        <div class="modal" id="newUserModal" role="dialog" aria-modal="true" aria-labelledby="newUserModalTitle"
            aria-hidden="true">
            <div class="modal-content" style="max-width:400px">
                <div class="modal-header">
                    <span class="modal-title" id="newUserModalTitle">Yeni Admin Ekle</span>
                    <button class="modal-close" onclick="closeNewUserModal()" aria-label="Kapat">
                        <svg width="16" height="16">
                            <use href="#i-x" />
                        </svg>
                    </button>
                </div>
                <div style="display:flex;flex-direction:column;gap:16px">
                    <div style="display:flex;flex-direction:column;gap:5px">
                        <label class="detail-label" for="newUserUsername">Kullanıcı adı</label>
                        <input type="text" id="newUserUsername" autocomplete="username"
                            style="width:100%;height:34px;padding:0 10px;border:1px solid var(--border);border-radius:var(--radius);font-size:13px;font-family:inherit;color:var(--text);background:var(--surface);outline:none;"
                            placeholder="admin">
                    </div>
                    <div style="display:flex;flex-direction:column;gap:5px">
                        <label class="detail-label" for="newUserPassword">Şifre</label>
                        <input type="password" id="newUserPassword" autocomplete="new-password"
                            style="width:100%;height:34px;padding:0 10px;border:1px solid var(--border);border-radius:var(--radius);font-size:13px;font-family:inherit;color:var(--text);background:var(--surface);outline:none;"
                            placeholder="••••••••">
                    </div>
                    <div style="display:flex;flex-direction:column;gap:5px">
                        <label class="detail-label" for="newUserRole">Rol</label>
                        <select id="newUserRole" class="filter-select" style="height:34px;width:100%">
                            <option value="admin">Admin</option>
                            <option value="root">Root</option>
                        </select>
                    </div>
                    <div id="newUserError"
                        style="display:none;background:#fef2f2;border:1px solid #fca5a5;border-radius:var(--radius-sm);padding:10px 12px;font-size:12.5px;color:#991b1b">
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-ghost" onclick="closeNewUserModal()">İptal</button>
                    <button class="btn btn-primary" id="newUserSubmitBtn" onclick="submitNewUser()">
                        <svg width="13" height="13">
                            <use href="#i-plus" />
                        </svg>
                        Oluştur
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal: Toplu Taşı -->
        <div class="modal" id="bulkMoveModal" role="dialog" aria-modal="true" aria-labelledby="bulkMoveModalTitle"
            aria-hidden="true">
            <div class="modal-content" style="max-width:400px">
                <div class="modal-header">
                    <span class="modal-title" id="bulkMoveModalTitle">Toplu Taşı</span>
                    <button class="modal-close" onclick="closeBulkMoveModal()" aria-label="Kapat">
                        <svg width="16" height="16">
                            <use href="#i-x" />
                        </svg>
                    </button>
                </div>
                <div style="display:flex;flex-direction:column;gap:12px">
                    <label class="detail-label" for="bulkMoveFolderSelect">Hedef klasör</label>
                    <select id="bulkMoveFolderSelect" class="filter-select" style="height:36px;width:100%"
                        aria-label="Klasör seçin">
                        <option value="">Klasör seçin</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-ghost" onclick="closeBulkMoveModal()">İptal</button>
                    <button class="btn btn-primary" id="bulkMoveConfirmBtn" onclick="confirmBulkMove()">Taşı</button>
                </div>
            </div>
        </div>

        <script src="video-player.js"></script>
        <script src="components/StatsCards.js"></script>
        <script src="components/Sidebar.js"></script>
        <script src="components/Navbar.js"></script>
        <script src="components/VideoGrid.js"></script>
        <script src="components/Modal.js"></script>
        <script src="video-dashboard.js"></script>
</body>

</html>